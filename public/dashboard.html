<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <!-- Standard SEO Meta Tags -->
    <meta name="description" content="Welcome to stockportfolio.pro, your platform for visualizing US stock performance and analyzing fundamental data with advanced tools. Get started today!" />
    <meta name="keywords" content="stock portfolio, US stocks, stock visualization, stock fundamentals, financial analysis, investment platform, portfolio management" />
    <meta name="author" content="stockportfolio.pro" />
    <meta name="robots" content="index, follow" />
    <!-- Open Graph Meta Tags (for social media and AI crawlers) -->
    <meta property="og:title" content="stockportfolio.pro - Visualize US Stock Performance" />
    <meta property="og:description" content="Discover stockportfolio.pro, the ultimate platform to visualize US stock performance, analyze fundamentals, and manage your portfolio with powerful tools." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.stockportfolio.pro/" />
    <meta property="og:image" content="https://www.stockportfolio.pro/media/success.png" />
    <meta property="og:site_name" content="stockportfolio.pro" />
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="stockportfolio.pro - Visualize US Stock Performance" />
    <meta name="twitter:description" content="Join stockportfolio.pro to visualize US stock performance, analyze fundamentals, and track your portfolio with cutting-edge tools." />
    <meta name="twitter:image" content="https://www.stockportfolio.pro/media/success.png" />
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R5X6MKH91S"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-R5X6MKH91S');
    </script>
    <!-- Structured Data (JSON-LD) for context -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "stockportfolio.pro - Welcome",
        "description": "Welcome to stockportfolio.pro, a platform for visualizing US stock performance, analyzing fundamental data, and managing investment portfolios.",
        "url": "https://www.stockportfolio.pro/",
        "publisher": {
          "@type": "Organization",
          "name": "stockportfolio.pro",
          "logo": {
            "@type": "ImageObject",
            "url": "https://www.stockportfolio.pro/media/success.png"
          }
        },
        "mainEntity": {
          "@type": "WebApplication",
          "name": "stockportfolio.pro",
          "applicationCategory": "FinanceApplication",
          "featureList": [
            "Visualize US stock performance",
            "Analyze fundamental data of US stocks",
            "Portfolio management and performance tracking",
            "Interactive charts for price history and portfolio breakdown",
            "Secure authentication with email or social media",
            "Responsive design for all devices"
          ],
          "operatingSystem": "Web"
        }
      }
    </script>
    <title>Stock Visualization Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="/media/use.png"
    />
    <style>
      :root {
        --primary: #f0b90b;
        --primary-dark: #d4a009;
        --background: #1a1c24;
        --card-bg: #21232c;
        --text-primary: #ffffff;
        --text-secondary: #d3d5db;
        --border: #3a3e4a;
        --success: #28a745;
        --danger: #dc3545;
        --danger-dark: #c82333;
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        margin: 0;
        background-color: var(--background);
        color: var(--text-primary);
        padding: 2vw;
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .container {
        max-width: 1280px;
        margin: 0 auto;
        padding: 2rem;
        width: 100%;
        flex: 1;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem 0;
        margin-bottom: 2.5rem;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .nav-links {
        display: flex;
        gap: 1.5rem;
        align-items: center;
        flex-wrap: wrap;
      }

      .nav-links a {
        color: var(--primary);
        text-decoration: none;
        font-size: clamp(14px, 2.5vw, 16px);
        font-weight: 500;
        transition: color 0.3s ease;
      }

      .nav-links a:hover {
        color: var(--text-primary);
      }

      .section {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      h1 {
        font-size: clamp(24px, 5vw, 32px);
        font-weight: 600;
        color: var(--primary);
        margin: 0 0 1.5rem;
      }

      h2 {
        font-size: clamp(20px, 4vw, 24px);
        font-weight: 600;
        color: var(--text-secondary);
        margin: 1.5rem 0 1rem;
      }

      .form-group {
        margin-bottom: 2rem;
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      label {
        font-size: clamp(14px, 2.5vw, 16px);
        font-weight: 500;
        color: var(--text-secondary);
        margin-bottom: 0.5rem;
      }

      input[type="text"],
      input[type="number"],
      select {
        padding: 0.875rem;
        width: 30%;
        max-width: 100%;
        background: #2c2f3a;
        border: 1px solid var(--border);
        border-radius: 8px;
        color: var(--text-primary);
        font-size: clamp(14px, 2.5vw, 16px);
        transition: border-color 0.3s ease;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: var(--primary);
      }

      button {
        padding: 0.875rem 1.75rem;
        background: var(--primary);
        color: var(--background);
        border: none;
        border-radius: 8px;
        font-weight: 500;
        font-size: clamp(14px, 2.5vw, 16px);
        cursor: pointer;
        transition: background 0.3s ease, transform 0.1s ease;
        width: fit-content;
      }

      button:hover {
        background: var(--primary-dark);
        transform: translateY(-2px);
      }

      .logout-btn {
        background: var(--danger);
      }

      .logout-btn:hover {
        background: var(--danger-dark);
      }

      .delete-btn {
        background: var(--danger);
        padding: 0.625rem 1.25rem;
        font-size: clamp(12px, 2vw, 14px);
      }

      .delete-btn:hover {
        background: var(--danger-dark);
      }

      canvas {
        max-height: 400px;
        width: 100%;
        margin: 2rem 0;
        background: #2c2f3a;
        border-radius: 8px;
        padding: 0.75rem;
      }

      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-size: clamp(14px, 2.5vw, 16px);
        color: var(--text-secondary);
        background: #2c2f3a;
        border-radius: 8px;
        overflow: hidden;
        margin: 2rem 0;
      }

      th,
      td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border);
      }

      th {
        background: #3a3e4a;
        font-weight: 600;
        color: var(--text-primary);
      }

      tr:last-child td {
        border-bottom: none;
      }

      tr:hover {
        background: #2a2d38;
      }

      .portfolio-table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--border);
        flex-wrap: wrap;
        gap: 1rem;
      }

      .portfolio-performance {
        font-size: clamp(16px, 3vw, 18px);
        font-weight: 500;
        color: var(--text-primary);
        background: #2c2f3a;
        padding: 1rem;
        border-radius: 8px;
        border: 1px solid var(--border);
      }

      .gain-positive {
        color: var(--success);
      }

      .gain-negative {
        color: var(--danger);
      }

      #suggestions,
      #portfolioSuggestions {
        position: absolute;
        background: #2c2f3a;
        border: 1px solid var(--border);
        border-radius: 8px;
        max-height: 200px;
        overflow-y: auto;
        width: 100%;
        max-width: 360px;
        z-index: 10;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        margin-top: 0.5rem;
      }

      .suggestion-item {
        padding: 0.875rem;
        cursor: pointer;
        color: var(--text-secondary);
        transition: background 0.3s ease;
      }

      .suggestion-item:hover {
        background: var(--border);
      }

      .tabs {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin: 2rem 0;
      }

      .tab {
        padding: 0.75rem 1.5rem;
        background: #3a3e4a;
        color: var(--text-secondary);
        border-radius: 8px;
        cursor: pointer;
        font-size: clamp(14px, 2.5vw, 16px);
        font-weight: 500;
        transition: background 0.3s ease, color 0.3s ease;
        flex: 1;
        text-align: center;
      }

      .tab.active {
        background: var(--primary);
        color: var(--background);
      }

      .tab:hover {
        background: #4a4e5a;
      }

      .unit-toggle {
        padding: 0.75rem 1.5rem;
        background: #3a3e4a;
        color: var(--text-secondary);
        border-radius: 8px;
        cursor: pointer;
        font-size: clamp(14px, 2.5vw, 16px);
        font-weight: 500;
        transition: background 0.3s ease;
        flex: 1;
        text-align: center;
      }

      .unit-toggle:hover {
        background: #4a4e5a;
      }

      .portfolio-metrics {
        margin: 2rem 0;
        font-size: clamp(16px, 3vw, 18px);
        font-weight: 500;
        color: var(--text-primary);
        background: #2c2f3a;
        padding: 1rem;
        border-radius: 8px;
        border: 1px solid var(--border);
      }

      .guest-notice {
        background: #3a3e4a;
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        font-size: clamp(14px, 2.5vw, 16px);
        color: var(--text-secondary);
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .container {
          padding: 1.5rem;
        }

        header {
          flex-direction: column;
          align-items: flex-start;
          gap: 1.25rem;
        }

        .nav-links {
          justify-content: center;
          width: 100%;
        }

        .section {
          padding: 1.5rem;
        }

        .form-group {
          gap: 0.5rem;
        }

        canvas {
          max-height: 300px;
        }

        table {
          font-size: clamp(12px, 2vw, 14px);
        }

        th,
        td {
          padding: 0.75rem;
        }
      }

      @media (max-width: 768px) {
        body {
          padding: 1rem;
        }

        .container {
          padding: 1rem;
        }

        header {
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        .nav-links {
          flex-direction: column;
          gap: 0.75rem;
          align-items: center;
        }

        .section {
          padding: 1rem;
          margin-bottom: 1.5rem;
        }

        h1 {
          font-size: clamp(20px, 4.5vw, 28px);
        }

        h2 {
          font-size: clamp(18px, 3.5vw, 20px);
        }

        input,
        select,
        button {
          font-size: clamp(12px, 2vw, 14px);
          padding: 0.75rem;
        }

        .tabs {
          flex-direction: column;
          gap: 0.5rem;
        }

        .tab,
        .unit-toggle {
          padding: 0.625rem;
          font-size: clamp(12px, 2vw, 14px);
        }

        .portfolio-table-header {
          flex-direction: column;
          align-items: flex-start;
          gap Dialling: 0.75rem;
        }

        .portfolio-performance {
          font-size: clamp(14px, 2.5vw, 16px);
          padding: 0.75rem;
          width: 100%;
        }

        table {
          display: block;
          overflow-x: auto;
          white-space: nowrap;
        }

        th,
        td {
          min-width: 120px;
        }

        canvas {
          max-height: 250px;
          margin: 1.5rem 0;
        }

        #suggestions,
        #portfolioSuggestions {
          max-width: 100%;
        }
      }

      @media (max-width: 480px) {
        body {
          padding: 0.5rem;
        }

        .container {
          padding: 0.5rem;
        }

        .section {
          padding: 0.75rem;
        }

        h1 {
          font-size: clamp(18px, 4vw, 24px);
        }

        h2 {
          font-size: clamp(16px, 3vw, 18px);
        }

        input,
        select,
        button {
          padding: 0.625rem;
          font-size: clamp(11px, 1.8vw, 13px);
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .tabs {
          margin: 1rem 0;
        }

        canvas {
          max-height: 200px;
        }

        .portfolio-metrics,
        .portfolio-performance,
        .guest-notice {
          font-size: clamp(12px, 2vw, 14px);
          padding: 0.625rem;
        }

        table {
          font-size: clamp(11px, 1.8vw, 13px);
        }

        th,
        td {
          padding: 0.5rem;
          min-width: 100px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Stock Visualization Platform</h1>
        <div class="nav-links">
          <a href="/">Home</a>
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
      </header>
      <!-- Guest Mode Notice -->
      <div id="guestNotice" class="guest-notice" style="display: none">
        You are in Guest Mode. You can add up to 5 stocks to your portfolio and
        analyze up to 5 companies' fundamentals.
      </div>
      <!-- Fundamentals Section -->
      <div class="section">
        <h1>Company Fundamentals</h1>
        <div class="form-group">
          <label for="companySearch">Enter Company Name (e.g., AAPL)</label>
          <input
            type="text"
            id="companySearch"
            placeholder="e.g., AAPL"
            oninput="fetchSuggestions('companySearch', 'suggestions')"
          />
          <div id="suggestions" style="display: none"></div>
          <button onclick="fetchFundamentals()">Analyze</button>
        </div>
        <div id="fundamentalsResult" style="display: none">
          <h2>Price History</h2>
          <select id="pricePeriod">
            <option value="1year">1 Year</option>
            <option value="5year">5 Years</option>
            <option value="max">Since Inception</option>
          </select>
          <canvas id="priceChart"></canvas>
          <h2>Financial Metrics</h2>
          <div class="tabs">
            <button class="tab active" onclick="setFinancialTab('income')">
              Income
            </button>
            <button class="tab" onclick="setFinancialTab('balance')">
              Balance Sheet
            </button>
            <button class="tab" onclick="setFinancialTab('cashflow')">
              Cash Flow
            </button>
          </div>
          <div class="tabs">
            <button class="tab" onclick="setFinancialPeriod('10year')">
              10 Years
            </button>
            <button class="tab active" onclick="setFinancialPeriod('5year')">
              5 Years
            </button>
            <button class="tab" onclick="setFinancialPeriod('quarterly')">
              Quarterly
            </button>
            <button class="unit-toggle" onclick="toggleFinancialUnit()">
              Switch to Millions
            </button>
          </div>
          <canvas id="financialBarChart"></canvas>
          <h2>Detailed Financials</h2>
          <table id="financialTable">
            <thead>
              <tr>
                <th>Metric</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
      <!-- Portfolio Tracking Section -->
      <div class="section">
        <h1>Portfolio Tracker</h1>
        <div class="form-group">
          <label for="portfolioCompany">Company Name</label>
          <input
            type="text"
            id="portfolioCompany"
            placeholder="e.g., TSLA"
            oninput="fetchSuggestions('portfolioCompany', 'portfolioSuggestions')"
          />
          <div id="portfolioSuggestions" style="display: none"></div>
          <label for="quantity">Quantity</label>
          <input type="number" id="quantity" placeholder="e.g., 10" min="1" />
          <label for="priceType">Purchase Price</label>
          <select id="priceType">
            <option value="manual">Enter Manually</option>
            <option value="current">Use Current Price</option>
          </select>
          <input
            type="number"
            id="manualPrice"
            placeholder="e.g., 150"
            min="0.01"
            step="0.01"
            style="display: none"
          />
          <button onclick="addToPortfolio()">Add to Portfolio</button>
        </div>
        <h2>Portfolio Breakdown</h2>
        <canvas id="portfolioDoughnut"></canvas>
        <div class="portfolio-metrics" id="portfolioMetrics"></div>
        <div class="portfolio-table-header">
          <h2>Portfolio Holdings</h2>
          <div class="portfolio-performance" id="portfolioPerformance"></div>
        </div>
        <table id="portfolioTable">
          <thead>
            <tr>
              <th>Symbol</th>
              <th>Shares</th>
              <th>Purchase Price</th>
              <th>Current Price</th>
              <th>Gain/Loss</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="portfolioList"></tbody>
        </table>
      </div>
    </div>

    <script src="dashboard.js"></script>
  </body>
</html>
